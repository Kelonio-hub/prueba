<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IES CARPE DIEM - Biblioteca Hipatia</title>
    <link rel="icon" href="https://site.educa.madrid.org/ies.carpediem.fuenlabrada//wp-content/uploads/ies.carpediem.fuenlabrada/2023/03/logo-carpe-diem-cuadrado-500x500-blanco-100x100.png" sizes="32x32" />
    <link rel="icon" href="https://site.educa.madrid.org/ies.carpediem.fuenlabrada//wp-content/uploads/ies.carpediem.fuenlabrada/2023/03/logo-carpe-diem-cuadrado-500x500-blanco-300x300.png" sizes="192x192" />
    <link rel="apple-touch-icon" href="https://site.educa.madrid.org/ies.carpediem.fuenlabrada//wp-content/uploads/ies.carpediem.fuenlabrada/2023/03/logo-carpe-diem-cuadrado-500x500-blanco-300x300.png" />
    <meta name="msapplication-TileImage" content="https://site.educa.madrid.org/ies.carpediem.fuenlabrada//wp-content/uploads/ies.carpediem.fuenlabrada/2023/03/logo-carpe-diem-cuadrado-500x500-blanco-300x300.png" />
    <link rel="preload" href="./Ejemplares.xml" as="fetch" crossorigin="anonymous">
    <link rel="preload" href="https://raw.githubusercontent.com/Kelonio-hub/prueba/main/logo%20biblioteca.png" as="image">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.10/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.18/marked.min.js"></script>
    <script src="script.js" defer></script>
</head>
<body>
    <div id="splash" tabindex="0">
        <div class="splash-container">
            <img src="https://raw.githubusercontent.com/Kelonio-hub/prueba/main/logo%20biblioteca.png"
                 alt="Logo de la Biblioteca Hipatia"
                 loading="lazy"
                 onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gTm8gQ2FycmVnYWRvPC90ZXh0Pjwvc3ZnPg=='">
            <h2>¡Bienvenidos a la Biblioteca Hipatia!</h2>
            <p>Cargando el catálogo de libros y aventuras...</p>
        </div>
    </div>
    <div id="app">
        <header>
            <div class="theme-controls">
                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Cambiar entre tema claro y oscuro">🌙</button>
            </div>
            <h1>Biblioteca Hipatia - <a href="https://site.educa.madrid.org/ies.carpediem.fuenlabrada/" target="_blank" style="color:white;"> IES CARPE DIEM </a></h1>
            <div class="header-search">
                <input type="text" id="buscarInput" placeholder="Busca por título, autor, tejuelo, categoría" 
                       aria-label="Busca libros por título, autor, tejuelo o categoría en la barra de búsqueda" 
                       onkeypress="if(event.key === 'Enter') mostrarResultadosBusqueda()" 
                       list="sugerenciasBusqueda">
                <datalist id="sugerenciasBusqueda"></datalist>
                <button class="btn buscar-btn" onclick="mostrarResultadosBusqueda()">Buscar 🔍</button>
                <button class="btn reserva-btn" onclick="window.open('ENLACE_POR_DETERMINAR', '_blank')" 
                        aria-label="Abrir formulario de reserva de libros">Reserva de Libros 📚</button>
                <button class="btn solicitud-btn" onclick="window.open('ENLACE_POR_DETERMINAR', '_blank')" 
                        aria-label="Abrir formulario de solicitud de libros nuevos">Solicitud de Libros Nuevos 🔖</button>
            </div>
        </header>
        <main>
            <section id="seccionDerecha">
                <h2>Hipat-IA</h2>
                <p>¡Tu Bibliotecaria Virtual! 👩‍💼</p>
                <div id="chatMensajes" role="log" aria-live="polite"></div>
                <div class="chat-controls">
                    <input type="text" id="chatInput" placeholder="Libros, sinopsis, recomendaciones..." 
                           aria-label="Envía un mensaje a la bibliotecaria virtual para ayuda con libros o recomendaciones" 
                           onkeypress="if(event.key === 'Enter') enviarMensaje()">
                    <button class="btn" onclick="enviarMensaje()">Enviar 💬</button>
                </div>
            </section>
        </main>
        <div id="searchModal" tabindex="0">
            <div id="searchModalContent">
                <span class="modal-close" role="button" aria-label="Cerrar ventana de resultados de búsqueda" onclick="cerrarModal()">&times;</span>
                <h3>Resultados de Búsqueda</h3>
                <div class="modal-search">
                    <input type="text" id="modalSearchInput" placeholder="Busca por título, autor, tejuelo, categoría" 
                           aria-label="Busca libros en el modal por título, autor, tejuelo o categoría" 
                           onkeypress="if(event.key === 'Enter') buscarEnModal()">
                    <button class="btn" onclick="buscarEnModal()">Buscar 🔍</button>
                </div>
                <div id="conteoResultadosModal"></div>
                <div id="resultadosModal"></div>
                <div id="searchPagination" class="pagination"></div>
            </div>
        </div>
    </div>
</body>
</html>