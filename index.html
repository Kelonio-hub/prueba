!DOCTYPE html
html lang=es
head
    meta charset=UTF-8
    meta name=viewport content=width=device-width, initial-scale=1.0
    titleBiblioteca Hipatia - IES CARPE DIEMtitle
    link rel=icon type=imagex-icon href=favicon.ico
    link rel=icon type=imagepng href=httpsraw.githubusercontent.comKelonio-hubpruebamainlogo%20biblioteca.png
    link rel=apple-touch-icon sizes=180x180 href=httpsraw.githubusercontent.comKelonio-hubpruebamainlogo%20biblioteca.png
    script src=httpscdn.jsdelivr.netnpm@emailjsbrowser@3distemail.min.jsscript
    script src=httpscdnjs.cloudflare.comajaxlibsxlsx0.18.5xlsx.full.min.jsscript
    script
        (function(){
            emailjs.init(YOUR_USER_ID);
        })();
    script
    link rel=stylesheet href=styles.css
head
body
    div id=splash
        div class=splash-container
            img src=httpsraw.githubusercontent.comKelonio-hubpruebamainlogo%20biblioteca.png
                 alt=Logo de la Biblioteca Hipatia
                 onerror=this.src='dataimagesvg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkxvZ28gTm8gQ2FycmVnYWRvPC90ZXh0Pjwvc3ZnPg=='
            h2¬°Bienvenidos a la Biblioteca Hipatia!h2
            pCargando el cat√°logo de libros y aventuras...p
        div
    div
    !-- Toast notification --
    div id=toastdiv
    div id=loginSection
        h2Acceso a la Bibliotecah2
        button class=theme-toggle-login onclick=toggleTheme() aria-label=Cambiar temaüåôbutton
        pSolo usuarios @educa.madrid.org aprobadosp
        input type=email id=loginEmail placeholder=Introduce tu email @educa.madrid.org
        br
        button onclick=login()Acceder üìñbutton
        p id=loginError style=color var(--danger); display none;Email inv√°lido o no aprobado.p
    div
    div id=app
        header
            div class=theme-controls
                button class=theme-toggle onclick=toggleTheme() aria-label=Cambiar temaüåôbutton
                button class=customize-colors onclick=openColorModal() aria-label=Personalizar coloresüåàbutton
            div
            h1Cat√°logo de la Biblioteca Hipatiah1
            pIES CARPE DIEM, Fuenlabradap
            div class=header-search
                input type=text id=buscarInput placeholder=Busca por t√≠tulo, autor, tejuelo, categor√≠a onkeypress=if(event.key === 'Enter') buscarLibros() list=sugerenciasBusqueda
                datalist id=sugerenciasBusquedadatalist
                button onclick=buscarLibros()Buscar üîçbutton
            div
            div class=email-section id=emailSection
                span id=adminBadge class=admin-badge style=display none; onclick=mostrarHistorialAdmin()
                    ADMIN
                    span id=notificationCount class=notification-count style=display none;span
                span
                button class=btn-flotante btn-solicitudes id=btnSolicitudes style=display none; onclick=abrirModalSolicitudes()Solicitudes de Libros üìùbutton
                button class=btn-flotante btn-rese√±as id=btnRese√±as style=display none; onclick=abrirModalRese√±as()Rese√±as de Libros ‚≠êbutton
                button class=btn-flotante btn-mas-prestados id=btnLecturasPrestadas style=display none; onclick=abrirModalLecturasPrestadas()Lecturas m√°s Prestadas üìäbutton
                !-- Intercambio de posiciones Web del IES ahora antes de Cerrar Sesi√≥n --
                button class=btn-flotante web-ies-btn onclick=window.open('httpssite.educa.madrid.orgies.carpediem.fuenlabrada', '_blank')Web del IES üåêbutton
                button class=btn-flotante logout-btn onclick=logout()Cerrar Sesi√≥n üëãbutton
            div
        header
        main
            section id=seccionIzquierda style=display none;
                h2Mi Perfil Lectorh2
                p id=emailDisplay style=display none;p
             
                !-- Nueva secci√≥n de gamificaci√≥n (m√°s compacta) --
                div id=progresoLector onclick=abrirModalProgreso()
                    div class=progress-header
                        span class=nivel-actualNivel Actual span id=nivelBadge class=badge-nivelLector Iniciado üîçspanspan
                        span id=puntosDisplay0 puntosspan
                    div
                    div class=progress-bar
                        div id=progressFill class=progress-fill style=width 0%;div
                    div
                    p class=puntos-total¬°Haz clic para ver c√≥mo ganar puntos!p
                div
             
                div id=misReservas
                    h3Mis Reservash3
                    pAqu√≠ aparecer√°n los libros que has reservado.p
                div
             
                div id=misPrestamos
                    h3Mis Pr√©stamosh3
                    pAqu√≠ ver√°s los libros que tienes en pr√©stamo actualmente.p
                div
                div id=recomendaciones
                    h3Recomendaciones Personalizadas üí°h3
                    pBasadas en tus lecturas anteriores.p
                    div id=listaRecomendacionesdiv
                div
            section
            section id=seccionDerecha style=display none;
                h2Hipat-IAh2
                p¬°Tu Bibliotecaria Virtual! üë©‚Äçüíºp
                div id=chatMensajesdiv
                div class=chat-controls
                    input type=text id=chatInput placeholder=Libros, sinopsis, recomendaciones... onkeypress=if(event.key === 'Enter') enviarMensaje()
                    button onclick=enviarMensaje()Enviar üí¨button
                    button class=btn-limpiar-chat onclick=limpiarChat()Limpiar Chat üóëÔ∏èbutton
                div
            section
            section id=adminHistorial style=display none;
                h2Administraci√≥nh2
                div id=adminTabs
                    button class=tab-btn active onclick=showAdminTab('tareas')Tareas Pendientesbutton
                    button class=tab-btn onclick=showAdminTab('historial')Historial Completobutton
                    button class=tab-btn onclick=showAdminTab('correos')Gesti√≥n de Correosbutton
                    button class=tab-btn onclick=showAdminTab('solicitudes')Solicitudes de Librosbutton
                div
                div id=adminTabContentdiv
            section
        main
        !-- Modal para resultados de b√∫squeda --
        div id=searchModal
            div id=searchModalContent
                span class=modal-close onclick=cerrarModal()&times;span
                h3Resultados de B√∫squedah3
                div id=conteoResultadosModaldiv
                div id=resultadosModaldiv
                div id=searchPagination class=paginationdiv
            div
        div
        !-- Modal para Solicitudes --
        div id=solicitudesModal
            div id=solicitudesModalContent
                span class=modal-close onclick=cerrarModalSolicitudes()&times;span
                h3SOLICITUD DE LIBROSh3
                p¬°Cu√©ntanos cu√°l ser√° tu pr√≥xima aventura!p
                textarea id=solicitudTextarea maxlength=500 placeholder=Indica los libros que m√°s te interesar√≠a leer en el IEStextarea
                div class=contador-palabras
                    span id=contador0500 palabrasspan
                div
                button onclick=enviarSolicitud()Enviar Solicitud üìùbutton
                div id=misSolicitudesEnviadas class=lista-enviadas
                    h4Mis Solicitudes Enviadash4
                    pAqu√≠ ver√°s las solicitudes que has compartido.p
                div
            div
        div
        !-- Modal para Rese√±as (ahora con selecci√≥n de libro y ratings) --
        div id=rese√±asModal
            div id=rese√±asModalContent
                span class=modal-close onclick=cerrarModalRese√±as()&times;span
                h3RESE√ëA DE LIBROSh3
                p¬°Cu√©ntanos qu√© libros te has le√≠do y qu√© te han parecido!p
                label for=libroRese√±aSelectSelecciona un libro rese√±adolabel
                select id=libroRese√±aSelect
                    option value=Elige un libro de tus pr√©stamosoption
                select
                labelValoraci√≥n (1-5 estrellas)label
                fieldset class=rating-stars
                    input type=radio id=star5 name=rating value=5
                    label for=star5‚òÖlabel
                    input type=radio id=star4 name=rating value=4
                    label for=star4‚òÖlabel
                    input type=radio id=star3 name=rating value=3
                    label for=star3‚òÖlabel
                    input type=radio id=star2 name=rating value=2
                    label for=star2‚òÖlabel
                    input type=radio id=star1 name=rating value=1
                    label for=star1‚òÖlabel
                fieldset
                textarea id=rese√±aTextarea maxlength=500 placeholder=Tus experiencias nos ayudan a conocer mejor tus gustostextarea
                div class=contador-palabras
                    span id=contadorRese√±as0500 palabrasspan
                div
                button onclick=enviarRese√±a()Enviar Rese√±a ‚≠êbutton
                div id=misRese√±asEnviadas class=lista-enviadas
                    h4Mis Rese√±as Enviadash4
                    pAqu√≠ ver√°s las rese√±as que has compartido.p
                div
            div
        div
        !-- Modal para Lecturas M√°s Prestadas (con gr√°fico) --
        div id=lecturasMasPrestadasModal
            div id=lecturasMasPrestadasModalContent
                span class=modal-close onclick=cerrarModalLecturasPrestadas()&times;span
                h3Lecturas M√°s Prestadash3
                pTop 10 de las lecturas m√°s populares en la biblioteca.p
                div id=listaLecturasPrestadasdiv
            div
        div
        !-- Nueva Modal para Progreso y Acciones de Puntos --
        div id=progresoModal
            div id=progresoModalContent
                span class=modal-close onclick=cerrarModalProgreso()&times;span
                h3¬°Gana Puntos y Sube de Nivel! üéÆh3
                pEstas son las acciones que te ayudan a progresar como lector.p
                ul class=acciones-puntos
                    lispanReservar y recoger un librospanspan class=puntos-accion+15 ptsspanli
                    lispanDevolver a tiempospanspan class=puntos-accion+10 ptsspanli
                    lispanEscribir una rese√±aspanspan class=puntos-accion+20 ptsspanli
                    lispanSolicitar un libro nuevospanspan class=puntos-accion+10 ptsspanli
                    lispanDevolver con retrasospanspan class=puntos-accion negativo-5 ptsspanli
                    lispanDevolver da√±adorotospanspan class=puntos-accion negativo-20 ptsspanli
                ul
                pem¬°Cuanto m√°s leas y compartas, m√°s r√°pido subes de nivel!emp
            div
        div
        !-- Modal de Personalizaci√≥n de Colores --
        div id=colorModal
            div id=colorModalContent
                span class=modal-close onclick=closeColorModal()&times;span
                h3Personaliza Tus Colores üåàh3
                pElige colores para elementos clave. Los cambios se aplican en tiempo real en ambos temas. Se guardar√°n al confirmar.p
                div class=color-group
                    label for=bg-primaryFondo Principallabel
                    input type=color id=bg-primary
                div
                div class=color-group
                    label for=bg-secondaryFondo Secundario (secciones)label
                    input type=color id=bg-secondary
                div
                div class=color-group
                    label for=text-primaryTexto Principallabel
                    input type=color id=text-primary
                div
                div class=color-group
                    label for=text-secondaryTexto Secundariolabel
                    input type=color id=text-secondary
                div
                div class=color-group
                    label for=btn-primaryBotones Principaleslabel
                    input type=color id=btn-primary
                div
                div class=color-group
                    label for=border-colorBordeslabel
                    input type=color id=border-color
                div
                div class=color-group
                    label for=btn-flotante-bgFondo Botones Flotanteslabel
                    input type=color id=btn-flotante-bg
                div
                div class=color-group
                    label for=btn-flotante-colorTexto Botones Flotanteslabel
                    input type=color id=btn-flotante-color
                div
                div class=color-group
                    label for=btn-flotante-hover-bgHover Botones Flotanteslabel
                    input type=color id=btn-flotante-hover-bg
                div
                div class=color-group
                    label for=bot-msg-colorColor Texto Chat-Botlabel
                    input type=color id=bot-msg-color
                div
                button onclick=saveCustomColors()Guardar y Cerrar üíæbutton
                button onclick=resetCustomColors()Restablecer Predeterminados üîÑbutton
            div
        div
    div
    script type=textjavascript src=xlsx-helper.jsscript
    script src=variables.jsscript
    script src=colors.jsscript
    script src=theme.jsscript
    script src=gamification.jsscript
    script src=toast.jsscript
    script src=login.jsscript
    script src=perfil.jsscript
    script src=solicitudes.jsscript
    script src=resenas.jsscript
    script src=lecturas.jsscript
    script src=admin.jsscript
    script src=search.jsscript
    script src=chat.jsscript
    script src=catalogo.jsscript
    script src=splash.jsscript
    script src=init.jsscript
body
html