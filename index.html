<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>üßÖ Simulador Tor - Simulaci√≥n Mouse, Scroll, Click Autom√°tica</title>
<style>
  body {font-family:system-ui;background:#0d1117;color:#c9d1d9;margin:0;padding:20px;}
  .container {max-width:900px;margin:auto;}
  .header {text-align:center;margin-bottom:30px;}
  .ip-box {background:#161b22;padding:15px;border-radius:12px;margin-bottom:25px;font-family:monospace;border:1px solid #30363d;}
  .session {background:#161b22;padding:20px;margin:20px 0;border-radius:12px;border:1px solid #30363d;}
  .log {background:#0d1117;color:#00ff9d;padding:15px;height:220px;overflow-y:auto;font-family:'Consolas',monospace;font-size:13px;border-radius:10px;margin-top:25px;border:1px solid #30363d;}
  .progress-bar {background:#21262d;height:10px;border-radius:5px;overflow:hidden;margin-top:12px;}
  .progress {background:linear-gradient(90deg,#00ff9d,#58a6ff);height:100%;width:0%;transition:width 0.8s ease;}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h2>üßÖ Simulador ‚Äì Simulaci√≥n autom√°tica de mouse, scroll, click</h2>
    <p>Pulsa **play rojo central** para iniciar cada v√≠deo (interacci√≥n genuina)</p>
  </div>

  <div class="ip-box">
    IP: <b><span id="ip">detectando...</span></b> ¬∑ Circuito: <span id="circuit">#1</span>
  </div>

  <div class="session">
    <div><strong>Sesi√≥n √∫nica</strong></div>
    <div>V√≠deo: <span id="vid">cargando...</span></div>
    <div>Tiempo: <span id="time">0</span>s / <span id="dur">?</span>s</div>
    <div style="position:relative;">
      <div id="player"></div>
    </div>
    <div class="progress-bar"><div class="progress" id="prog"></div></div>
  </div>

  <pre class="log" id="log"></pre>
</div>

<script src="https://www.youtube.com/iframe_api"></script>
<script>
// Log
const log = (msg) => {
  const el = document.getElementById('log');
  if (el) {
    el.textContent += msg + '\n';
    el.scrollTop = el.scrollHeight;
  }
  console.log(msg);
};

// Lista de 68 v√≠deos
const VIDEOS = [
  "PVAJ0PNkZOY","8GHDl5CaJak","PO8R79_khyY","dmis0r0zfgo","Y9Q33T1ZQCA",
  "bxgEtnDPr8s","7gWzxC1FG9s","g0T9MUepaew","BaB_n_6PB48","9W0aODZAQXI",
  "IJBgGKUT8pk","ZzZZzdRevWY","K98b_GEKIQI","rSJGpBZtGfA","ihOaZigO3Dc",
  "8Z0v_bcwWZ4","sm5q-wke_ZA","98gTZQCvxmA","1lOzNqlHGiQ","Hr3MHaMypnI",
  "t7pVbWWkJpo","bMnYoYa9flQ","4OlP0CLJdGY","EdRX5HB0-xs","ZnkHeuM5Pd0",
  "7EuuLsNVuW0","d0dhk_sTm8g","1clOkDVWhoQ","MQ6GjU_vtuA","RgdWm2QNbsc",
  "V_zQJq7mF9A","zK_sM9L7Kl0","eumgxZdighA","Zm9Uejl-3PE","lo3Nyzb5vpk",
  "aqeLygkAWg8","RIs5DifGYmc","KtYmcO91Zzk","34oQFo-rRjw","hLOX5KFWUe8",
  "XODbdvhM6cw","8bv94f2lC_E","DQYGKD9zpxM","3kaKZRm0nAw","o7vLmTusGo4",
  "GhKYWo8In6Y","HTojwb3kScY","EKVQyQ8PGfc","CqrJ3fdQaP8","Xe6qoIRUJao",
  "oJ8rqr-qrtA","_ccxJLFLbKU","EjZKftGw8RU","3oa7W946xg8","14mJ61oHZdI",
  "j_9V3mls1PI","rXoBnjthPjo","LtvNS3uoP_8","nuq6URbX4Vk","F9593kcLHQE",
  "bSiJeI_3Q_8","_bWT-Mv4n1k","eh4vGEfh3SM","x64mBqRQ7Ss","OA74PsM7tNI",
  "SYF7XLVhuOc","SwJl0UnLCSs","fuD5KKXFkmY"
];

const HIGH_RET = [0.95, 0.99];

let player = null;
let currentIdx = Math.floor(Math.random() * VIDEOS.length);
let userHasInteracted = false;
let lastPauseTime = Date.now();

// IP check
let curIP = "...", circuit = 1, lastIP = null;
async function updateIP() {
  try {
    const r = await fetch("https://api.ipify.org?format=json");
    const d = await r.json();
    if (lastIP && lastIP !== d.ip) { circuit++; log(`Nuevo circuito ‚Üí ${d.ip}`); }
    lastIP = d.ip; curIP = d.ip;
    document.getElementById('ip').textContent = curIP || 'detectando...';
    document.getElementById('circuit').textContent = `#${circuit}`;
  } catch {}
}
setInterval(updateIP, 20000); updateIP();

// Cargar v√≠deo pausado
function loadVideo() {
  const vid = VIDEOS[currentIdx];
  document.getElementById('vid').textContent = vid;

  if (player) player.destroy?.();

  player = new YT.Player('player', {
    height: '360',
    width: '640',
    videoId: vid,
    playerVars: {
      autoplay: 0,
      mute: 1,
      controls: 1,
      rel: 0,
      modestbranding: 1,
      enablejsapi: 1
    },
    events: {
      onReady: (e) => {
        document.getElementById('dur').textContent = Math.floor(e.target.getDuration() || 180);
        log(`V√≠deo cargado: ${vid} - Pulsa play rojo para iniciar`);
        monitor();
      },
      onStateChange: (e) => {
        if (e.data === YT.PlayerState.PLAYING) {
          log("Reproduciendo (iniciado por play rojo)");
          if (userHasInteracted) {
            e.target.unMute?.();
            e.target.setVolume?.(100);
          } else {
            userHasInteracted = true;
            e.target.unMute?.();
            e.target.setVolume?.(100);
          }
        }
        if (e.data === YT.PlayerState.ENDED) {
          log("V√≠deo terminado ‚Üí cargando siguiente aleatorio...");
          nextVideo();
        }
      },
      onError: (e) => log(`Error: ${e.data}`)
    }
  });
}

function nextVideo() {
  currentIdx = Math.floor(Math.random() * VIDEOS.length);
  const delay = Math.random() * 9000 + 5000; // 5-14s
  log(`Siguiente v√≠deo aleatorio en ${Math.round(delay/1000)} segundos...`);
  setTimeout(loadVideo, delay);
}

function monitor() {
  if (!player?.getCurrentTime) return setTimeout(monitor, 1400);

  const cur = player.getCurrentTime() || 0;
  const dur = player.getDuration() || 100;
  document.getElementById('time').textContent = Math.floor(cur);
  document.getElementById('prog').style.width = `${(cur / dur * 100) || 0}%`;

  // Recuperar sonido si se pierde
  if (userHasInteracted && player.isMuted?.()) {
    player.unMute?.();
    player.setVolume?.(100);
    log("[AUTO] Recuperando sonido...");
  }

  // Pausa natural aleatoria (cada ~1-2 min)
  const now = Date.now();
  if (player.getPlayerState() === YT.PlayerState.PLAYING &&
      (now - lastPauseTime > 45000) &&
      Math.random() < 0.025) {

    player.pauseVideo();
    const pauseDuration = Math.random() * 105000 + 15000; // 15s a 2 min
    log(`[PAUSA NATURAL] Detenido ${Math.round(pauseDuration/1000)} segundos...`);
    log("‚Üí Pulsa play rojo para reanudar cuando quieras");
    lastPauseTime = now;

    // NO reanudamos autom√°ticamente ‚Üí usuario debe pulsar play rojo
  }

  // Pasar al siguiente si casi termina
  if (cur >= dur * (Math.random()*(HIGH_RET[1]-HIGH_RET[0]) + HIGH_RET[0]) || cur >= dur - 5) {
    nextVideo();
  } else {
    setTimeout(monitor, 1400);
  }
}

// Inicio
function onYouTubeIframeAPIReady() {
  log("[API] YouTube cargada ‚úì");
  setTimeout(loadVideo, 3000);
}

log("[INIT] Esperando API... (5-15s aprox)");
log("Cuando cargue el v√≠deo ‚Üí pulsa el **bot√≥n play rojo central** para iniciar");
log("Al terminar ‚Üí se carga autom√°ticamente otro v√≠deo aleatorio (pausado)");
log("Pausas naturales aleatorias cada ~1-2 minutos (15s a 2 min) - pulsa play rojo para reanudar");
</script>
</body>
</html>